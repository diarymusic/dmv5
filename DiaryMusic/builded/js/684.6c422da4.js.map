{"version":3,"file":"js/684.6c422da4.js","mappings":"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","sources":["webpack://dm/./src/components/musicPlayer.vue","webpack://dm/./src/components/musicPlayer.vue?0ba8","webpack://dm/./src/views/songDetail.vue","webpack://dm/./src/views/songDetail.vue?115a"],"sourcesContent":["<template>\r\n  <div class=\"audio-player text-black\">\r\n    <div class=\"audio-info\">\r\n      <div class=\"song-name\">\r\n        {{ songName }}\r\n      </div>\r\n      <div class=\"controlsrow\">\r\n        <div class=\"controls\">\r\n          <button class=\"play-pause\" @click=\"togglePlay\">\r\n            <i\r\n              class=\"text-black playAndPause\"\r\n              :class=\"isPlaying ? 'ri-pause-fill' : 'ri-play-fill'\"\r\n            ></i>\r\n          </button>\r\n        </div>\r\n        <div\r\n          class=\"progress-bar\"\r\n          :id=\"'bar' + songid\"\r\n          @mousedown=\"startDrag\"\r\n          @click=\"handleClick\"\r\n        >\r\n          <div class=\"progress\" :style=\"{ width: progress + '%' }\"></div>\r\n          <div\r\n            class=\"progress-handle\"\r\n            :style=\"{ left: progress + '%' }\"\r\n            @mousedown=\"startDrag\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n    .audio-player {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    padding: 10px;\r\n    border-radius: 5px;\r\n    -webkit-user-drag: none;\r\n}\r\n.controlsrow {\r\n    border-left: #ffffff 2px solid;\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    padding: 0 10px 0 10px;\r\n    border-radius: 0;\r\n    -webkit-user-drag: none;\r\n}\r\nbody{\r\n    -webkit-user-select: none;\r\n    user-select: none;\r\n}\r\n.audio-info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    flex-grow: 1;\r\n}\r\n\r\n.song-name {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.progress-bar {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 10px;\r\n    background-color: #ccc;\r\n    border-radius: 5px;\r\n}\r\n\r\n.progress {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100%;\r\n    background-color: #333;\r\n    border-radius: 5px 0 0 5px;\r\n}\r\n\r\n.progress-handle {\r\n    position: absolute;\r\n    top: -5px;\r\n    left: 0;\r\n    width: 10px;\r\n    height: 20px;\r\n    background-color: #333;\r\n    cursor: pointer;\r\n    border-radius: 0 5px 5px 0;\r\n}\r\n\r\n.controls {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.play-pause {\r\n    border: none;\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    color: #ffffff;\r\n}\r\n\r\ni{\r\n    transition: transform 0.2s;\r\n}\r\n\r\n.ri-play-fill:hover {\r\n    transform: scale(1.05);\r\n}\r\n\r\n.ri-pause-fill:hover {\r\n    transform: scale(1.05);\r\n}\r\n</style>\r\n<script>\r\nvar audiosMap = [];\r\nfunction createAudio({ songname, src }) {\r\n  var audio = new Audio(src);\r\n  audiosMap.push({\r\n    songname: songname,\r\n    src: audio,\r\n  });\r\n  console.log(\"Current Audios : %d\", audiosMap.length);\r\n  return audio;\r\n}\r\nfunction showPlaying() {\r\n  audiosMap.forEach(function (audio) {\r\n    if (!audio.src.paused) {\r\n      console.log(audio);\r\n      console.log(!audio.src.paused);\r\n      document.querySelector(\".playingname\").innerText = audio.songname;\r\n      document.querySelector(\".notifyPlay\").classList.add(\"show\");\r\n    }\r\n  });\r\n}\r\nfunction pauseAllAudio(th) {\r\n  document.querySelectorAll(\".playAndPause\").forEach((el) => {\r\n    el.classList.remove(\"ri-pause-fill\");\r\n    el.classList.add(\"ri-play-fill\");\r\n  });\r\n  audiosMap.forEach(function (audio) {\r\n    if (audio.src != th) {\r\n      audio.src.pause();\r\n    }\r\n  });\r\n}\r\nfunction audioSpectrum() {\r\n  var currentAudio = null;\r\n  audiosMap.forEach((el) => {\r\n    currentAudio = el.src.isPlaying ? null : el.src;\r\n  });\r\n\r\n  // 创建音频上下文\r\n  var audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n  var analyser = audioContext.createAnalyser();\r\n  var source = audioContext.createMediaElementSource(currentAudio);\r\n  source.connect(analyser);\r\n  analyser.connect(audioContext.destination);\r\n\r\n  // 创建Canvas元素\r\n  var canvas = document.getElementById(\"frequencySpectrum\");\r\n  var canvasCtx = canvas.getContext(\"2d\");\r\n\r\n  // 设置频谱参数\r\n  analyser.fftSize = 2048;\r\n  var bufferLength = analyser.frequencyBinCount;\r\n  var dataArray = new Uint8Array(bufferLength);\r\n\r\n  // 绘制频谱\r\n  function draw() {\r\n    requestAnimationFrame(draw);\r\n    analyser.getByteFrequencyData(dataArray);\r\n    canvasCtx.fillStyle = \"rgb(0, 0, 0)\";\r\n    canvasCtx.fillRect(0, 0, canvas.width, canvas.height);\r\n    var barWidth = (canvas.width / bufferLength) * 2.5;\r\n    var barHeight;\r\n    var x = 0;\r\n    for (var i = 0; i < bufferLength; i++) {\r\n      barHeight = dataArray[i];\r\n      canvasCtx.fillStyle = `rgb(${barHeight + 100},${barHeight + 100},${\r\n        barHeight + 100\r\n      })`;\r\n      canvasCtx.fillRect(\r\n        x,\r\n        canvas.height - barHeight / 2,\r\n        barWidth,\r\n        barHeight / 2\r\n      );\r\n      x += barWidth + 1;\r\n    }\r\n  }\r\n\r\n  // 开始绘制\r\n  draw();\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      audio: null,\r\n      isPlaying: false,\r\n      progress: 0,\r\n      dragStartX: 0,\r\n      dragStartProgress: 0,\r\n    };\r\n  },\r\n  props: {\r\n    songName: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    songPath: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    songid: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    songArts: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(this.songName);\r\n    this.audio = createAudio({\r\n      songname: this.songName,\r\n      src: this.songPath,\r\n    });\r\n    this.audio.addEventListener(\"timeupdate\", this.updateProgress);\r\n    this.audio.addEventListener(\"ended\", this.resetPlayer);\r\n  },\r\n  methods: {\r\n    togglePlay() {\r\n      if (this.isPlaying) {\r\n        this.audio.pause();\r\n      } else {\r\n        pauseAllAudio(this.audio);\r\n        audioSpectrum();\r\n        // showPlaying()\r\n        this.audio.play();\r\n      }\r\n      this.isPlaying = !this.isPlaying;\r\n    },\r\n    updateProgress() {\r\n      const { currentTime, duration } = this.audio;\r\n      this.progress = (currentTime / duration) * 100;\r\n    },\r\n    startDrag(event) {\r\n      this.dragStartX = event.clientX;\r\n      this.dragStartProgress = this.progress;\r\n      document.addEventListener(\"mousemove\", this.handleDrag);\r\n      document.addEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    startBarDrag(event) {\r\n      this.dragStartX = event.clientX;\r\n      this.dragStartProgress = this.progress;\r\n      document.addEventListener(\"mousemove\", this.handleBar);\r\n      document.addEventListener(\"mouseup\", this.stopBarDrag);\r\n    },\r\n    handleDrag(event) {\r\n      const deltaX = event.clientX - this.dragStartX;\r\n      const progressBarWidth = document.getElementById(\r\n        `bar${this.songid}`\r\n      ).offsetWidth;\r\n      const progressDelta = (deltaX / progressBarWidth) * 100;\r\n      this.progress = this.dragStartProgress + progressDelta;\r\n      this.audio.currentTime = (this.progress / 100) * this.audio.duration;\r\n    },\r\n    handleBar(event) {\r\n      const progressBarWidth = document.getElementById(\r\n        `bar${this.songid}`\r\n      ).offsetWidth;\r\n      const clickX = event.target.getBoundingClientRect().left;\r\n      const progress = (clickX / progressBarWidth) * 100;\r\n      this.progress = progress;\r\n      this.audio.currentTime = (progress / 100) * this.audio.duration;\r\n    },\r\n    handleClick(event) {\r\n      const progressBarWidth = document.getElementById(\r\n        `bar${this.songid}`\r\n      ).offsetWidth;\r\n      const clickX = event.clientX - event.target.getBoundingClientRect().left;\r\n      const progress = (clickX / progressBarWidth) * 100;\r\n      this.progress = progress;\r\n      this.audio.currentTime = (progress / 100) * this.audio.duration;\r\n    },\r\n    stopDrag() {\r\n      document.removeEventListener(\"mousemove\", this.handleDrag);\r\n      document.removeEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    stopBarDrag() {\r\n      document.removeEventListener(\"mousemove\", this.handleDrag);\r\n      document.removeEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    resetPlayer() {\r\n      this.isPlaying = false;\r\n      this.progress = 0;\r\n      this.audio.currentTime = 0;\r\n    },\r\n  },\r\n};\r\n</script>","import { render } from \"./musicPlayer.vue?vue&type=template&id=45fed9f8&scoped=true\"\nimport script from \"./musicPlayer.vue?vue&type=script&lang=js\"\nexport * from \"./musicPlayer.vue?vue&type=script&lang=js\"\n\nimport \"./musicPlayer.vue?vue&type=style&index=0&id=45fed9f8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-45fed9f8\"]])\n\nexport default __exports__","<template>\r\n  <section\r\n    class=\"w-screen px-6 sm:px-8 lg:flex lg:w-full lg:items-center lg:justify-between lg:gap-12\"\r\n  >\r\n    <div class=\"relative overflow-hidden lg:w-1/2 image-container-r2l\">\r\n      <img :src=\"modal.cover\" class=\"image\" />\r\n      <div class=\"mask-r2l\"></div>\r\n    </div>\r\n    <div class=\"relative overflow-y-scroll lg:w-1/2\">\r\n      <div class=\"h-8 lg:h-1\"></div>\r\n      <h2 class=\"font-display font-extrabold pb-2 text-center lg:text-left\">\r\n        <span class=\"text-white-300 text-6xl xl:text-7xl\">{{\r\n          modal.songname\r\n        }}</span>\r\n        <div>\r\n          <div class=\"h-3\"></div>\r\n        </div>\r\n      </h2>\r\n      <div class=\"h-3\"></div>\r\n      <h3\r\n        class=\"font-display text-lg xl:text-xl font-extrabold text-black dark:text-orange-100 leading-4 text-center lg:text-left\"\r\n      >\r\n        <template v-for=\"(artist, index) in modal.artists\" :key=\"index\">\r\n          <a\r\n            class=\"artistlink\"\r\n            :href=\"'https://music.163.com/#/artist?id=' + artist.trueid\"\r\n            :data-trueid=\"artist.trueid\"\r\n          >\r\n            {{ artist.name }} </a\r\n          >{{ index + 1 != modal.artists.length ? \" / \" : \"\" }}\r\n        </template>\r\n      </h3>\r\n      <div class=\"h-4\"></div>\r\n      <p\r\n        class=\"text-base text-black dark:text-gray-300 text-center lg:text-left\"\r\n        style=\"white-space: pre-wrap\"\r\n      >\r\n        {{ modal.desc }}\r\n      </p>\r\n      <!-- <div class=\"mask-l2r mask-b2t\"></div> -->\r\n      <div class=\"h-12\">\r\n        <div class=\"xl: flex flex-col gap-4 xl:flex-row justify-center mb-4\">\r\n          <template v-if=\"modal.audioshow\">\r\n            <template v-for=\"(au, i) in modal.audios\" :key=\"i\">\r\n              <!-- <audio controls :src=\"au.src\"></audio> -->\r\n              <component\r\n                :is=\"player\"\r\n                :songName=\"au.name\"\r\n                :songPath=\"au.src\"\r\n                :songid=\"i\"\r\n                :songArts=\"au.artists\"\r\n              >\r\n              </component>\r\n            </template>\r\n            <canvas id=\"frequencySpectrum\"></canvas>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script setup>\r\nimport player from \"@/components/musicPlayer.vue\";\r\nimport {ref,onMounted,defineProps} from \"vue\";\r\nconst modal = ref({})\r\nconst newsong = ref({})\r\nconst temp = ref({})\r\nconst songs = ref({})\r\n\r\nconst props = defineProps(['sid'])\r\nonMounted(()=>{\r\n\r\n  var i = props.sid;\r\n  fetch(\"/api/get163\", {\r\n    headers: {\r\n      \"Content-Type\": \"application/json;charset=utf8\",\r\n      \"Access-Control-Allow-Origin\": \"*\",\r\n    },\r\n  })\r\n      .then((d) => d.json())\r\n      .then((d) => {\r\n        newsong.value = {\r\n          name: \"\",\r\n          cover: \"\",\r\n          artists: {\r\n            name: \"\",\r\n            trueid: \"\",\r\n          },\r\n          desc: \"\",\r\n          audioshow: false,\r\n          audios: [],\r\n        }\r\n        songs.value = (d.status = 200)\r\n                ? d.data != undefined\r\n                    ? d.data\r\n                    : {}\r\n                : {}\r\n        modal.value = {\r\n          cover: songs.value[i].cover,\r\n          songname: songs.value[i].name,\r\n          artists: songs.value[i].artists,\r\n          audioshow: false,\r\n          audios: [],\r\n        };\r\n        modal.value.desc = \"加载中···\";\r\n        fetch(`/api/getAlbum/${songs.value[i].trueid}`)\r\n            .then((r) => r.json())\r\n            .then((r) => {\r\n              modal.value = {\r\n                cover: songs.value[i].cover,\r\n                songname: songs.value[i].name,\r\n                artists: songs.value[i].artists,\r\n                audioshow: false,\r\n                audios: [],\r\n              };\r\n              temp.value = r.resourceState == true ? r : {};\r\n              modal.value.desc =\r\n                  r.resourceState == true\r\n                      ? r.album.description\r\n                      : \"__//\\n获取失败，请稍后再试···\\n- Diary Music -\\n//__\";\r\n              for (let i = 0; i < r.songs.length; i++) {\r\n                modal.value.audioshow = true;\r\n                let arts = [];\r\n                for (let iar = 0; iar < r.songs[i].ar.length; iar++) {\r\n                  arts.push({\r\n                    n: r.songs[i].ar[iar].name,\r\n                    i: r.songs[i].ar[iar].id,\r\n                  });\r\n                }\r\n                modal.value.audios.push({\r\n                  name: `#${i + 1}: ${r.songs[i].name}`,\r\n                  artists: arts,\r\n                  src: `/api/getMp3/${r.songs[i].id}`,\r\n                });\r\n              }\r\n            });\r\n      })\r\n      .catch(\r\n          (e) =>\r\n              (modal.value.desc = `__//\\n获取失败，请稍后再试···\\n错误代码：${e}\\n- Diary Music -\\n//__`)\r\n      );\r\n})\r\n</script>\r\n","import script from \"./songDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./songDetail.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","$props","songName","_hoisted_4","_hoisted_5","onClick","_cache","args","$options","togglePlay","_normalizeClass","$data","isPlaying","id","songid","onMousedown","startDrag","handleClick","style","_normalizeStyle","width","progress","left","audiosMap","createAudio","songname","src","audio","Audio","push","console","log","length","pauseAllAudio","th","document","querySelectorAll","forEach","el","classList","remove","add","pause","audioSpectrum","currentAudio","audioContext","window","AudioContext","webkitAudioContext","analyser","createAnalyser","source","createMediaElementSource","connect","destination","canvas","getElementById","canvasCtx","getContext","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","draw","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","height","barHeight","barWidth","x","i","data","dragStartX","dragStartProgress","props","type","String","required","songPath","Number","songArts","Array","mounted","this","addEventListener","updateProgress","resetPlayer","methods","play","currentTime","duration","event","clientX","handleDrag","stopDrag","startBarDrag","handleBar","stopBarDrag","deltaX","progressBarWidth","offsetWidth","progressDelta","clickX","target","getBoundingClientRect","removeEventListener","__exports__","render","modal","ref","newsong","temp","songs","__props","onMounted","sid","fetch","headers","then","d","json","value","name","cover","artists","trueid","desc","audioshow","audios","status","undefined","r","resourceState","album","description","arts","iar","ar","n","catch","e"],"sourceRoot":""}