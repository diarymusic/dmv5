{"version":3,"file":"js/813.57c4b13d.js","mappings":"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","sources":["webpack://dm/./src/views/regiView.vue","webpack://dm/./src/views/regiView.vue?004b"],"sourcesContent":["<template>\r\n  <div class=\"bg-white text-black dark:text-white\">\r\n    <div id=\"page\" class=\"site\">\r\n      <div class=\"container\">\r\n        <div class=\"row justify-content-center align-items-center g-2\">\r\n          <div class=\"col-xs-8 col-sm-10 col-md-6 col-lg-6\">\r\n            <div class=\"hero\">\r\n              <h1 class=\"typing\" data-text=\"在此注册到Diary Music 官网.\">\r\n                在此注册到Diary Music 官网.\r\n              </h1>\r\n              <p>如果您已拥有账号,您可<a href=\"#/login\">在此登录</a>.</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-xs-8 col-sm-10 col-md-6 col-lg-6\">\r\n            <div class=\"login\">\r\n              <div class=\"main text-black\">\r\n\r\n                  <form>\r\n                    <template v-if=\"verify\">\r\n                      <div class=\"side-icon\">\r\n                        <div class=\"mb-3\"><span class=\"text-2xl\">你的邮箱为：</span><span>{{lockem}}</span></div>\r\n                        <div class=\"row justify-content-center align-items-center\">\r\n                          <div class=\"col-12\">\r\n                            <input :value=\"lockem\" disabled=\"disabled\"/>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"row justify-content-center align-items-center\">\r\n                          <div class=\"col-8\" id=\"vfi\">\r\n                            <input v-model=\"vf\" placeholder=\"验证码\" required type=\"number\"/>\r\n                          </div>\r\n                          <div class=\"col-4\" id=\"vfb\">\r\n                            <button type=\"button\" class=\"send\" @click=\"sendVerf\">\r\n                              <span class=\"spinner-border spinner-border-sm d-none\" role=\"status\" aria-hidden=\"true\" id=\"vfsp\"></span>\r\n                              发送\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </template>\r\n                    <template v-else>\r\n                      <div class=\"side-icon\">\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"un\"\r\n                            placeholder=\"您的用户名\"\r\n                            v-model=\"un\"\r\n                            required\r\n                        />\r\n                        <i class=\"ri-account-box-line\"></i>\r\n                      </div>\r\n                      <div class=\"side-icon\">\r\n                        <input\r\n                            type=\"email\"\r\n                            name=\"ue\"\r\n                            placeholder=\"您的邮箱\"\r\n                            v-model=\"em\"\r\n                            required\r\n                        />\r\n                        <i class=\"ri-mail-line\"></i>\r\n                      </div>\r\n                      <div class=\"side-icon\">\r\n                        <div\r\n                            class=\"row justify-content-center align-items-center g-2 avaUpl\"\r\n                        >\r\n                          <div class=\"col-12 c10\">\r\n                            <input\r\n                                class=\"form-control\"\r\n                                type=\"file\"\r\n                                id=\"fileAjax\"\r\n                                name=\"fileAjax\"\r\n                                placeholder=\"上传一个头像\"\r\n                                style=\"height: 100%\"\r\n                                accept=\".jpg,.png,.jpeg,.gif\"\r\n                                required\r\n                                @change=\"showPrv\"\r\n                            />\r\n                            <i class=\"ri-image-add-fill\"></i>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"side-icon\">\r\n                        <input\r\n                            id=\"\"\r\n                            type=\"password\"\r\n                            name=\"pw\"\r\n                            placeholder=\"您的密码\"\r\n                            required\r\n                            v-model=\"pw\"\r\n                        />\r\n                        <i class=\"ri-eye-off-line\" id=\"eye\" @click=\"eyeOnOff\"></i>\r\n                      </div>\r\n                      <div class=\"side-icon\">\r\n                        <input type=\"password\" id=\"repsw\" name=\"repsw\" placeholder=\"重复密码\" required v-model=\"pww\"/>\r\n                        <i class=\"ri-eye-off-line\"></i>\r\n                      </div>\r\n                    </template>\r\n                    <div>\r\n                      <template v-if=\"verify\">\r\n                        <button type=\"button\" class=\"submit\" @click=\"verificate\">\r\n                      <span\r\n                          class=\"spinner-border spinner-border-sm d-none\"\r\n                          role=\"status\"\r\n                          aria-hidden=\"true\"\r\n                          id=\"rsp\"\r\n                      ></span>\r\n                          验证\r\n                        </button>\r\n                      </template>\r\n                      <template v-else>\r\n                        <button type=\"button\" class=\"submit\" @click=\"regi\">\r\n                      <span\r\n                          class=\"spinner-border spinner-border-sm d-none\"\r\n                          role=\"status\"\r\n                          aria-hidden=\"true\"\r\n                          id=\"rsp\"\r\n                      ></span>\r\n                          注册\r\n                        </button>\r\n                      </template>\r\n                    </div>\r\n                  </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Modal trigger button -->\r\n  <button\r\n    type=\"button\"\r\n    class=\"prvLnch hidden\"\r\n    data-bs-toggle=\"modal\"\r\n    data-bs-target=\"#PrvModal\"\r\n  ></button>\r\n\r\n  <!-- Modal Body -->\r\n  <!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"PrvModal\"\r\n    tabindex=\"-1\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"modalTitleId\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div\r\n      class=\"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-sm\"\r\n      role=\"document\"\r\n    >\r\n      <div class=\"modal-content shadow-lg\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"modalTitleId\">上传头像</h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close prvCls\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body flex flex-row justify-center align-center\">\r\n          <img class=\"w-50 h-50\" :src=\"imgTemp\" alt=\"\">\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消上传\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"uplImg\">上传</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nconst tpl = `<div class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-animation=\"true\" data-bs-autohide=\"false\">\r\n                            <div class=\"toast-header\">\r\n                                <img src=\"\" class=\"rounded me-2\" alt=\"\">\r\n                                <strong class=\"me-auto\">{{msg}}</strong>\r\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n                            </div>\r\n                        </div>`;\r\nimport $ from \"jquery\";\r\nimport Handlebars from \"handlebars\";\r\nfunction showLastToast() {\r\n  var toastElList = [].slice.call(document.querySelectorAll(\".toast\"));\r\n  var toastList = toastElList.map(function (toastEl) {\r\n    return new bootstrap.Toast(toastEl);\r\n  });\r\n  toastList[toastList.length - 1].show();\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      flag: false,\r\n      lockem:'',\r\n      un:'',\r\n      em: \"\",\r\n      pw: \"\",\r\n      pww: \"\",\r\n      vf: \"\",\r\n      img:'default.png',\r\n      imgTemp:'default.png',\r\n      verify:false,\r\n    };\r\n  },\r\n  methods: {\r\n    eyeOnOff() {\r\n      if (!this.flag) {\r\n        $(\"#eyeInput\").attr(\"type\", \"text\");\r\n        $(\"#eye\").attr(\"class\", \"ri-eye-line\");\r\n        this.flag = true;\r\n      } else {\r\n        $(\"#eyeInput\").attr(\"type\", \"password\");\r\n        $(\"#eye\").attr(\"class\", \"ri-eye-off-line\");\r\n        this.flag = false;\r\n      }\r\n    },\r\n    sendVerf() {\r\n      if (this.lockem !== null)\r\n        fetch(`/api/sendCode/${this.lockem}`)\r\n          .then((d) => d.json())\r\n          .then((d) => {\r\n            let dt = { msg: \"发送失败\" };\r\n            dt.msg = d.status == 200 ? \"发送成功\" : \"发送失败\";\r\n            $(Handlebars.compile(tpl)(dt).toString()).appendTo(\r\n              \".toast-container\"\r\n            );\r\n            showLastToast();\r\n          });\r\n    },\r\n    verificate(){\r\n      let form = new FormData();\r\n      form.append(\"em\", this.lockem);\r\n      form.append(\"vf\", this.vf);\r\n new Promise((resolve, reject)=>{\r\n          if(this.lockem==''){\r\n            resolve(2)\r\n          }else if(!this.vf==''){\r\n            fetch('/api/verify',{\r\n              method:'post',\r\n              body:form\r\n            }).then(r=>r.json()).then(r=>{\r\n              if(r.status===200 && r.code===0){\r\n                location.hash='#/'\r\n                resolve(0)\r\n              }else{\r\n                resolve(1)\r\n              }\r\n            }).catch(e=> {\r\n              resolve(4)\r\n            })\r\n          }else{\r\n            resolve(3)\r\n          }\r\n        }).then(val=>{\r\n          var m='';\r\n          switch (val){\r\n            case 0:m='验证成功';break;\r\n            case 1:m='验证失败:请检查验证码是否正确';break;\r\n            case 2:m='验证失败:请返回注册';break;\r\n            case 3:m='验证失败:验证码不能为空';break;\r\n            case 4:m='验证失败:系统错误';break;\r\n            default:m='验证失败:系统错误';break;\r\n          }\r\n          $(Handlebars.compile(tpl)({ msg: m }).toString()).appendTo(\r\n              \".toast-container\"\r\n          );\r\n          showLastToast();\r\n        })\r\n\r\n    },\r\n    regi() {\r\n      console.log('test')\r\n      this.lockem=this.em\r\n      if (\r\n          this.un.toString() !== \"\" &&\r\n        this.em.toString() !== \"\" &&\r\n        this.pw.toString() !== \"\" &&\r\n        this.pww.toString() !== \"\" &&\r\n        this.pww.toString() === this.pw.toString()\r\n      ) {\r\n        let form = new FormData();\r\n        form.append(\"un\", this.un);\r\n        form.append(\"em\", this.em);\r\n        form.append(\"pw\", b64_sha256(this.pw));\r\n        form.append('ap',this.img)\r\n\r\n\r\n        fetch(\"/api/register\", {\r\n          method: \"post\",\r\n          body: form,\r\n        })\r\n          .then((r) => r.json())\r\n          .then((r) => {\r\n            localStorage.setItem(\"token\", r.token);\r\n            if(r.status==200&&r.code==0){\r\n              this.verify = true\r\n            }\r\n            $(Handlebars.compile(tpl)({ msg: `${r.status == 200?`注册成功: 需要下一步验证`:`注册失败: ${r.code==1?'系统错误':r.code==2?'邮箱已存在':r.code==3?'用户名已存在':''}`}` }).toString()).appendTo(\r\n              \".toast-container\"\r\n            );\r\n            showLastToast();\r\n          })\r\n          .catch((e) => {\r\n            $(Handlebars.compile(tpl)({ msg: `注册失败: ${r.code==1?'系统错误':r.code==2?'邮箱已存在':r.code==3?'用户名已存在':''}` }).toString()).appendTo(\r\n              \".toast-container\"\r\n            );\r\n            showLastToast();\r\n            console.error(e);\r\n          });\r\n      } else {\r\n        $(\r\n          Handlebars.compile(tpl)({\r\n            msg: \"注册失败，请检查是否正确填写信息\",\r\n          }).toString()\r\n        ).appendTo(\".toast-container\");\r\n        showLastToast();\r\n      }\r\n    },\r\n    showPrv() {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL($('#fileAjax').prop('files')[0]);\r\n      reader.onload = ()=>{\r\n        try{\r\n          this.imgTemp = reader.result;\r\n          $('.prvLnch').click()\r\n          console.log(reader.result)\r\n        }catch(e){\r\n\r\n        }\r\n\r\n      }\r\n      reader.addEventListener('abort error',()=>{\r\n      })\r\n    },\r\n    uplImg(){\r\n      this.img = this.imgTemp;\r\n      $('.prvCls').click()\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    fetch('/api/getUserInfo', {\r\n      headers: { Token: localStorage.token }\r\n    }).then(d => d.json()).then(d => {\r\n      if(d.status==200&&d.verified==false){\r\n        this.lockem=d.data.acc\r\n        this.verify=true\r\n      }\r\n    })\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n@import \"@/assets/css/style.css\";\r\n</style>\r\n","import { render } from \"./regiView.vue?vue&type=template&id=fb3cb4e8&scoped=true\"\nimport script from \"./regiView.vue?vue&type=script&lang=js\"\nexport * from \"./regiView.vue?vue&type=script&lang=js\"\n\nimport \"./regiView.vue?vue&type=style&index=0&id=fb3cb4e8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fb3cb4e8\"]])\n\nexport default __exports__"],"names":["class","id","_createElementVNode","href","role","type","tabindex","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","$data","verify","_createElementBlock","_hoisted_9","_hoisted_10","_hoisted_11","_toDisplayString","lockem","_hoisted_12","_hoisted_13","value","disabled","_hoisted_15","_hoisted_16","vf","$event","placeholder","required","_hoisted_17","onClick","_cache","args","$options","sendVerf","_hoisted_18","_Fragment","key","_hoisted_19","name","un","_hoisted_20","_hoisted_21","em","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","style","accept","onChange","showPrv","_hoisted_26","_hoisted_27","pw","eyeOnOff","_hoisted_28","pww","_hoisted_29","verificate","_hoisted_30","regi","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","src","imgTemp","alt","_hoisted_39","_hoisted_40","uplImg","tpl","showLastToast","toastElList","slice","call","document","querySelectorAll","toastList","map","toastEl","bootstrap","Toast","length","show","data","flag","img","methods","this","$","attr","fetch","then","d","json","dt","msg","status","Handlebars","toString","appendTo","form","FormData","append","Promise","resolve","reject","method","body","r","code","location","hash","catch","e","val","m","console","log","b64_sha256","localStorage","setItem","token","error","reader","FileReader","readAsDataURL","prop","onload","result","click","addEventListener","created","mounted","headers","Token","verified","acc","__exports__","render"],"sourceRoot":""}